<!doctype html>
<html><head>
    <meta charset="utf-8">
    <title>Loco Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">


    <!-- Le styles -->
    <link rel="stylesheet" type="text/css" href="/static-admin/bootstrap/css/bootstrap.min.css" />

    <link href="/static-admin/css/login.css" rel="stylesheet">
    
	<script type="text/javascript" src="/static-admin/js/jquery.js"></script>    

    <style type="text/css">
      body {
        padding-top: 30px;
      }

      pbfooter {
        position:relative;
      }
    </style>
	
	<script type='text/javascript'>
	  var api_link = 'http://localhost:4100';
	  $(document).ready(function(){
	  
	    //ajax options
		
		//set cross domain cookie set
		$.ajaxSetup({
		  crossDomain: true,
		  xhrFields: {
			withCredentials: true
		  }
		});
	 
	    $(document).on('click','#submit',function(event){
		  event.preventDefault();
		  
		  var $saved = $(this);
		  
		  var obj = {
		    email : $('input#email').val(),
			password : $('input#password').val()
		  };
		  
		  for(var a in obj){
		    //console.log(obj[a]);
		    if(typeof obj[a] !== 'undefined'){
			  if(obj[a].length < 2){
			    $saved.val('Complete all forms');
			    return;
			  }
			}
		  }
		  
		  $.get(api_link,{action : 'login', email: obj.email, password: obj.password}, function(response){
		     if(response.status == 'error'){
			    $saved.val('Try again');
			 }else{
			    $saved.val('Redirecting..');
		        $('img.img-circle').attr('src',response.image);		
				
				//document.cookie = 'locoLogin=1; ';
				localStorage['logged'] = response.id;
				setTimeout(function(){
				  window.location = '/admin';
			      
			    },1000);
			 } 
		  });
		  
		
		});
		
		
		//show register 
		$(document).on('click','input#register', function(){
		  var $register_div = $('div.register');
		  
		  if(!$register_div.hasClass('show'))
		    $register_div.addClass('show');
		  else
		    $register_div.removeClass('show');
		});
		
		
		//send register2
		$(document).on('click','button.register', function(event){
		  event.preventDefault();
		  
		  var obj = {
		    action   : 'register',
			name     : $('input[name=name]').val(),
			email    : $('input[name=email_register]').val(),
			password : $('input[name=password_register]').val(),
			password2: $('input[name=password2_register]').val(),
			contact  : $('input[name=contact]').val(),
			adress   : $('input[name=adress]').val(),
			category : $('select[name=domain]').val(),
			description: $('textarea[name=description]').val()
		  };
		  
		  var $saved = $(this);
		  
		  
		  //check empty strings
		  for(var a in obj){
		    if(typeof obj[a] !== 'undefined'){
			  if(obj[a].length < 2){
			    $saved.text('Complete all forms');
				return;
			  }
		    }
		  }
		  
		  //check passwords
		  if(obj.password !== obj.password2){
		    $saved.text('Passwords do not match');
		    return;
		  }
		  
		  //check email
		  if(obj.email.length < 2 || obj.email.search('@') < 0){
		    $saved.text('Invalid Email');
			return;
		  }
		  
		  //check category
		  if(obj.category == 'Null'){
		    $saved.text('Invalid Category');
		    return;
		  }
		  
		  //if everything seems to be ok, create the request
		  $.post(api_link, obj, function(response){
		     
			if(response.status == 'done'){
			  $saved.text('Account created, please login.');
			  //console.log(response.id);
			  //window.location = '/admin';
			}else{
			  if(response.status == 'error')
			    $saved.text('Error, please try again');
			  else  
				$saved.text('This email is already used');
			}
		  
		  },'JSON');
		  
		  
		});
	 
	  });
	</script>

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
       
  	<!-- Google Fonts call. Font Used Open Sans & Raleway -->
	<link href="http://fonts.googleapis.com/css?family=Raleway:400,300" rel="stylesheet" type="text/css">
  	<link href="http://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">



</head>

<style>

    .pbfooter {
        position:relative;
    }

</style>

  <body style="background:url('/static-admin/images/bg.JPG') no-repeat center center; height:700px;">
    

    <!-- register -->
	<div class='register'>
	   <form onsubmit='this.preventDefault()' class='first'>
	     <input name='email_register' placeholder='Your Email' />
	     <input type='password' name='password_register' placeholder='Account Password' />
	     <input type='password' name='password2_register' placeholder='Re-type Password' />
	     
		 <input style='margin-top:20px' name='name' placeholder='Company Name' />
		 <input  name='contact' placeholder='Contact Email / Phone' />
		 <input  name='adress' placeholder='Adress' />
	     <select name='domain'>
		    <option value='Null' selected disabled> Select Company Type </option>
		    <option value='coffe'> Coffe Shop </option>
 		    <option value='food'> Food & FastFood </option>
			<option value='restaurant'> Restaurant </option>
			<option value='hotel'> Hotel </option>
			<option value='library'> Library </option>
			<option value='clothes'> Clothes Shop </option>
			<option value='library'> Electrical Shop </option>
		 </select>
	     <textarea name='description' placeholder='Small Description'></textarea>
		 <button class='register'>Register</button>
	   
	   </form>
	  
	</div>
	
  	<!-- NAVIGATION MENU -->

    <div class="navbar-nav navbar-inverse navbar-fixed-top">
        <div class="container">
        <div class="navbar-header" style='width:100%;'>

          <a class="navbar-brand" href="index.html"><img src="/static-admin/images/logo30.png" alt=""></a>
		  <input class="submit btn-success btn btn-large" id='register' type="submit" value="Create Company Account" style='margin-top:8px;float:right;right:8px;'>
        </div> 

        </div>
    </div>

    <div class="container">
        <div class="row">
   		<div class="col-lg-offset-4 col-lg-4" style="margin-top:100px">
   			<div class="block-unit" style="text-align:center; padding:8px 8px 8px 8px;">
   				<img style='max-width:80px;max-height:80px;' src="/static-admin/images/face80x80.jpg" alt="" class="img-circle">
   				<br>
   				<br>
					<form class="cmxform" id="signupForm" method="get" action="">
						<fieldset>
							<p>
								<input id="email" name="email" type="text" placeholder="Email">
								<input id="password" name="password" type="password" placeholder="Password">
							</p>
								<input class="submit btn-success btn btn-large" id='submit' type="submit" value="Login">

						</fieldset>
					</form>
   			</div>

   		</div>


        </div>
    </div>

    
  
</body></html>